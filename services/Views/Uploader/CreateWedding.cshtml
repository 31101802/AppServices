@using quierobesarte.Models
@{
    ViewBag.Title = "CreateWedding";
}
@model CreateWeddingDto

<form action="/Uploader/CreateWedding" method="post">


    @if (Session["IsValidPassword"] != null || Model.IsValidPassword(Request["Password"]))
    {
        Session["IsValidPassword"] = true;
        <h4>Crear boda</h4>
        <div>
            <label for="weddingName">Identificador</label>
            <input type="text" name="Id" id="weddingName" value=""><br>
        </div>
        <div>
            <label for="weddingName">Nombre de la boda</label>
            <input type="text" name="Name" id="weddingName" value=""><br>
        </div>
        <div>
            <label for="weddingDate">Fecha</label>
            <input type="text" name="Date" id="weddingDate" value=""><br>
        </div>


        
  
        <div class="control-group">
            <a class="btn btn-quierobesarte" href="#" onclick="document.forms[0].submit();">Crear</a>
        </div>
        
        if (Model.WeddingCreated)
        {
            Model.WeddingCreated = false;
        <div>
            <img src="@Url.Content("~/qrcodes/" + Model.CurrentQrCodeImageName)" />
        </div>
        <div>
            <span>Códigp de boda:
                <h4>@Model.Id</h4>
            </span>
            <span>Creada correctamente la boda :"@Model.Name" para el dia: @Model.Date</span>
            @Html.ActionLink("Ir a la subida de fotos", "Index", "Uploader", new { guid = Model.Id }, new { });
        </div>



        }

        <h6>Lista de bodas</h6>

        <div class="menu">
            <ul>
                @foreach (var wedding in Model.Weddings)
                {
                    <div>

                        <a href='@Url.Content(wedding.QrCodeImageName)' target="_new">
                            <img src="@Url.Content(wedding.QrCodeImageName)" width="100" height="100" />
                        </a>
                        <span>@wedding.Name</span>
                        <span>- </span>
                        <span>@wedding.Date</span>
                        <span>- </span>
                        <span>@Html.ActionLink("Ir a la subida de fotos", "Index", "Uploader", new { guid = wedding.Id }, new { })</span>

                    </div>
                }
            </ul>
        </div>
    }
    else
    {
        Session["IsValidPassword"] = null;
        <div class="login">
            <div class="login-screen">
                <div class="login-icon">
                    <img src="/Images/logo.png" style="width: 120px" alt="Welcome to Quierobesarte.es backoffice">
                    <h4>Welcome to <small>Quierobesarte.es backoffice</small></h4>
                </div>

                <div class="login-form">

                    <div class="control-group">
                        <input type="password" class="login-field" value="" placeholder="Password" id="login-pass" name="Password">
                        <label class="login-field-icon fui-lock" for="login-pass"></label>
                    </div>

                    <div class="control-group">
                        <a class="btn btn-primary btn-large btn-block" href="#" onclick="document.forms[0].submit();">Login</a>
                    </div>
                    @*<a class="login-link" href="#">Lost your password?</a>*@
                </div>
            </div>
        </div>
    }

</form>

